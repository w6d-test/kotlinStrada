// Top-level build file where you can add configuration options common to all sub-projects/modules.
apply plugin: 'maven'
apply plugin: 'com.android.application'

buildscript {
    ext.kotlin_version = '1.3.50'
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.5.3'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        google()
        jcenter()
        
    }
}

def releaseFile = file("/test/kotlin/app/build/outputs/apk/release/app-release-unsigned.apk")

artifacts {
    archives releaseFile
}

android {
    compileSdkVersion 28
}

repositories {
  maven {
    url "${nexusUrl}/content/groups/public"
  }
}


uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: "${nexusUrl}repository/maven-staging") {
                authentication(userName: nexusUsername, password: nexusPassword)
            }
            snapshotRepository(url: "${nexusUrl}repository/maven-staging") {
                authentication(userName: nexusUsername, password: nexusPassword)
            }
            pom.groupId = '/test/kotlin/app/build/outputs/apk/'
            pom.artifactId = 'release/app-release-unsigned.apk'
            pom.version = "${android.defaultConfig.versionName}"
        }
    }
}

